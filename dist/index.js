const inquirer=require("inquirer"),mysql=require("mysql"),ctable=require("console.table");let connection=mysql.createConnection({host:"localhost",port:3306,user:"root",password:"password",database:"management_system"});connection.connect(function(a){if(a)throw a;start()});function start(){inquirer.prompt({name:"initial",type:"list",choices:["View All Employees","View All Employees by Department","View All Employees by Manager","View ALl Managers","View All Departments","View All Roles","Add Employee","Remove Employee","Update Employee Role","Update Employee Manager"]}).then(function(a){switch(a.initial){case"View All Employees":viewEmployees();break;case"View All Employees by Department":viewDepartments();break;case"View All Employees by Manager":viewManagers();break;case"View All Managers":allManagers();break;case"View All Departments":allDepartments();break;case"View All Roles":allRoles();break;case"Add Employee":addEmployee();break;case"Remove Employee":removeEmployee();break;case"Update Employee Role":updateRole();break;case"Update Employee Manager":updateManager();break;case"View All Roles":viewRoles();}})}function viewEmployees(){let a="SELECT EM.employee_id, EM.first_name, EM.last_name, RL.title, DP.department_name, RL.salary, MG.manager_name ";a+="FROM Employee as EM LEFT JOIN Role as RL ON EM.role_id = RL.role_id ",a+="LEFT JOIN Department as DP on RL.department_id = DP.department_id ",a+="LEFT JOIN Manager as MG on EM.manager_id = MG.manager_id",connection.query(a,function(a,b){if(a)throw a;console.table(b),start()})}function viewDepartments(){connection.query("SELECT * FROM Department",function(a,b){if(a)throw a;inquirer.prompt({name:"Department",type:"list",message:"Listing All Departments",choices:function(){let a=[];for(let c=0;c<b.length;c++)a.push(b[c].department_name);return a}}).then(function(a){console.log(a);let b="SELECT EM.employee_id, EM.first_name, EM.last_name, RL.title, DP.department_name, RL.salary, EM.manager_id ";b+="FROM Employee as EM INNER JOIN Role as RL ON EM.role_id = RL.role_id ",b+="INNER JOIN Department as DP on RL.department_id = DP.department_id ",b+="WHERE DP.department_name = ?",connection.query(b,[a.Department],function(b,c){console.log(a.Department),console.table(c),start()})})})}function viewManagers(){connection.query("SELECT Manager.manager_id, Manager.manager_name FROM Manager",function(a,b){if(a)throw a;inquirer.prompt({name:"Manager",type:"list",message:"Listing All Managers",choices:function(){let a=[];for(let c=0;c<b.length;c++)a.push(b[c].manager_name);return a}}).then(function(a){console.log(a);let b="SELECT EM.employee_id, EM.first_name, EM.last_name, RL.title, DP.department_name, RL.salary ";b+="FROM Employee as EM INNER JOIN Role as RL ON EM.role_id = RL.role_id ",b+="INNER JOIN Department as DP on RL.department_id = DP.department_id ",b+="INNER JOIN Manager as MG on MG.manager_id = EM.manager_id ",b+="WHERE MG.manager_name = ?",connection.query(b,[a.Manager],function(b,c){console.log(a.Manager),console.table(c),start()})})})}function allManagers(){connection.query("SELECT Manager.manager_id, Manager.manager_name FROM Manager",function(a,b){if(a)throw a;console.table(b),start()})}function allDepartments(){connection.query("SELECT Deparment.department_id, Department.department_name FROM Department",function(a,b){if(a)throw a;console.table(b),start()})}